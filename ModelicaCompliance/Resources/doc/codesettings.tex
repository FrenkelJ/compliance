\definecolor{keywordcolor}{rgb}{0,0,.4}
\definecolor{literalcolor}{rgb}{.90,0,0}
\definecolor{stringcolor}{rgb}{0.133,0.545,0.133}
\definecolor{bgcolor}{rgb}{0.95,0.95,0.95}
\definecolor{typecolor}{rgb}{0.60,0.2,0.2}

\newcommand{\textcolordummy}[2]{#2}

\lstdefinelanguage{modelica}
{
  morekeywords=[1]{
    algorithm,and,annotation,as,assert,block,break,case,class,connect,connector,
    constant,constrainedby,der,discrete,each,else,elseif,elsewhen,encapsulated,
    end,enumeration,equality,equation,expandable,extends,external,failure,final,
    flow,for,function,guard,if,import,in,initial,inner,input,List,local,loop,
    match,matchcontinue,model,not,operator,Option,or,outer,output,package,parameter,
    partial,protected,public,record,redeclare,replaceable,return,stream,
    subtypeof,then,Tuple,type,uniontype,when,while},
  morekeywords=[2]{true, false},
  morekeywords=[3]{Real,Integer,String,Boolean},
  % Do not make true,false keywords because fn(true,x, false ) shows up as fn(true,x, *false*)
  sensitive=true,
  comment=[l]//,
  morecomment=[s]{/*}{*/},
  alsodigit={.,-},
  morestring=[b]',
  morestring=[b]",
  literate={0}{{\textcolor{literalcolor}{0}}}{1}%
           {1}{{\textcolor{literalcolor}{1}}}{1}%
           {2}{{\textcolor{literalcolor}{2}}}{1}%
           {3}{{\textcolor{literalcolor}{3}}}{1}%
           {4}{{\textcolor{literalcolor}{4}}}{1}%
           {5}{{\textcolor{literalcolor}{5}}}{1}%
           {6}{{\textcolor{literalcolor}{6}}}{1}%
           {7}{{\textcolor{literalcolor}{7}}}{1}%
           {8}{{\textcolor{literalcolor}{8}}}{1}%
           {9}{{\textcolor{literalcolor}{9}}}{1}%
           {.0}{{\textcolor{literalcolor}{.0}}}{2}% Following is to ensure that only periods
           {.1}{{\textcolor{literalcolor}{.1}}}{2}% followed by a digit are changed.
           {.2}{{\textcolor{literalcolor}{.2}}}{2}%
           {.3}{{\textcolor{literalcolor}{.3}}}{2}%
           {.4}{{\textcolor{literalcolor}{.4}}}{2}%
           {.5}{{\textcolor{literalcolor}{.5}}}{2}%
           {.6}{{\textcolor{literalcolor}{.6}}}{2}%
           {.7}{{\textcolor{literalcolor}{.7}}}{2}%
           {.8}{{\textcolor{literalcolor}{.8}}}{2}%
           {.9}{{\textcolor{literalcolor}{.9}}}{2}%
}[keywords,comments,strings]

\lstset{
  breaklines=true, 
  language=modelica,
  basicstyle=\ttfamily\small,
  keywordstyle=[1]\color{keywordcolor}\bfseries,
  keywordstyle=[2]\color{literalcolor},
  keywordstyle=[3]\color{typecolor}\bfseries,
  stringstyle=\color{stringcolor}\let\textcolor\textcolordummy,
  backgroundcolor=\color{bgcolor},
  framexleftmargin=5pt,
  xleftmargin=5pt,
  xrightmargin=5pt,
  showstringspaces=false,
}
